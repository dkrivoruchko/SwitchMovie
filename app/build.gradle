apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'
apply plugin: 'com.getkeepsafe.dexcount'
apply plugin: 'androidx.navigation.safeargs.kotlin'


android {
    compileSdkVersion(compileSdk)
    buildToolsVersion(buildTools)

    defaultConfig {
        applicationId "info.dvkr.switchmovie"
        minSdkVersion(minSdk)
        targetSdkVersion(targetSdk)
        versionCode = versionMajor * 10000 + versionMinor * 100 + versionPatch
        versionName = "$versionMajor.$versionMinor.$versionPatch"
        resConfigs "en"

        vectorDrawables.useSupportLibrary = true
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
        debug {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    sourceSets {
        main.java.srcDirs += 'src/main/kotlin'
        debug.java.srcDirs += 'src/debug/kotlin'
        release.java.srcDirs += 'src/release/kotlin'
    }

    compileOptions {
        setSourceCompatibility(JavaVersion.VERSION_1_8)
        setTargetCompatibility(JavaVersion.VERSION_1_8)
    }

    packagingOptions {
        exclude 'META-INF/atomicfu.kotlin_module'
    }
}

androidExtensions { experimental = true }
kapt { useBuildCache = true }

dependencies {
    implementation project(':domain')
    implementation project(':data')

    implementation("androidx.annotation:annotation:$androidxAnnotation")
    implementation("androidx.appcompat:appcompat:$androidxAppcompat")
    implementation("androidx.cardview:cardview:$androidxCardview")
    implementation("androidx.recyclerview:recyclerview:$androidxRecyclerview")
    implementation("androidx.constraintlayout:constraintlayout:$androidxConstraint")
//    implementation("com.google.android.material:material:$androidMaterial") TODO Move to new design

    implementation("androidx.navigation:navigation-fragment-ktx:$androidxNavigation")
    implementation("androidx.navigation:navigation-ui:$androidxNavigation")

    implementation("com.github.bumptech.glide:glide:4.9.0")

    kapt("androidx.room:room-compiler:$androidxRroom")

    implementation("androidx.lifecycle:lifecycle-extensions:$androidxLifecycle")
    implementation("androidx.lifecycle:lifecycle-runtime:$androidxLifecycle")
    implementation("androidx.lifecycle:lifecycle-common-java8:$androidxLifecycle")
//    kapt("androidx.lifecycle:lifecycle-compiler:$androidxLifecycle")
    implementation("org.koin:koin-android:$koin")
    implementation("org.koin:koin-androidx-viewmodel:$koin")

    implementation("com.jakewharton.threetenabp:threetenabp:$threetenabp")

    debugImplementation("com.squareup.leakcanary:leakcanary-android:$leakcanary")
}